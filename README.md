# ライフプランシミュレーター

FP1級相当の精度を持つスマホ専用ライフプランシミュレーションWebアプリケーションです。月額ベースで支出・収入を入力し、年次単位の収支シミュレーションが可能です。

## 🌟 主な機能

### 📊 詳細な支出管理
- **生活費**: 食費、光熱費、通信費、日用品、被服・美容費など詳細な項目別管理
- **教育費**: 子供の進学パターンに応じた自動計算機能
- **住居費**: 賃貸・持家（ローンあり/なし）に対応、住宅ローン自動計算
- **保険**: 各種保険料の管理
- **イベント**: 結婚、出産、車購入、引越などの一時的な支出

### 💰 収入管理
- **給与収入**: 本業・パート収入の管理
- **副業収入**: 副業による収入
- **投資収入**: 配当、利息などの投資収入
- **年金収入**: 公的年金、企業年金など
- **その他収入**: その他の収入源

### 🎯 高精度シミュレーション
- 年次単位での収支計算
- 累積収支の推移表示
- FP1級相当の計算精度
- 長期的な家計状況の把握

## 🚀 使用方法

### 1. アプリケーションの起動

```bash
# 依存関係のインストール
pip3 install -r requirements.txt

# アプリケーションの起動
python3 app.py
```

アプリケーションは `http://localhost:8203` で起動します。

### 2. ユーザー登録・ログイン

1. ブラウザで `http://localhost:8203` にアクセス
2. 「新規登録」からアカウントを作成
3. ログインしてダッシュボードにアクセス

### 3. データ登録

#### 支出データの登録
1. ダッシュボードから「支出管理」をクリック
2. 各タブ（生活費、教育費、住居費、保険、イベント）から必要なデータを入力
3. 月額ベースで入力（年額は自動計算）

#### 収入データの登録
1. ダッシュボードから「収入管理」をクリック
2. 各タブ（給与、副業、投資、年金、その他）から収入データを入力
3. 手取り額を月額ベースで入力

### 4. シミュレーション実行

1. ダッシュボードから「シミュレーション開始」をクリック
2. 現在の年齢、シミュレーション期間を設定
3. 「シミュレーション実行」ボタンをクリック
4. 年次収支表とサマリー統計を確認

## 🏗️ 技術仕様

### フロントエンド
- **デザイン**: Apple Human Interface Guidelines準拠
- **レスポンシブ**: スマホ専用設計
- **カラーパレット**: ライト/ダークモード対応
- **フォント**: -apple-system, 17px基準
- **UI要素**: 44×44px最小タップ領域、12px角丸

### バックエンド
- **フレームワーク**: Flask 2.3.3
- **データベース**: SQLite（SQLAlchemy ORM）
- **認証**: Flask-Login
- **ポート**: 8203

### データベース設計

#### ユーザー管理
- `users`: ユーザー情報

#### 支出テーブル
- `living_expenses`: 生活費（月額入力）
- `education_expenses`: 教育費（進学パターン自動計算）
- `housing_expenses`: 住居費（ローン計算機能付き）
- `insurance_expenses`: 保険料
- `event_expenses`: イベント費用（一括支出）

#### 収入テーブル
- `salary_incomes`: 給与収入
- `sidejob_incomes`: 副業収入
- `investment_incomes`: 投資収入
- `pension_incomes`: 年金収入
- `other_incomes`: その他収入

#### シミュレーション
- `lifeplan_simulations`: シミュレーション設定
- `lifeplan_expense_links`: 支出データリンク
- `lifeplan_income_links`: 収入データリンク

## 🧮 計算機能

### 教育費自動計算
子供の出生日と進学パターンから、以下の教育段階の費用を自動計算：

- **幼稚園**: 公立22,000円/月、私立48,000円/月
- **小学校**: 公立27,000円/月、私立130,000円/月
- **中学校**: 公立40,000円/月、私立110,000円/月
- **高校**: 公立35,000円/月、私立70,000円/月
- **大学**: 国公立45,000円/月、私立文系75,000円/月、私立理系95,000円/月

### 住宅ローン計算
元利均等返済の月額返済額を自動計算：

```
月額返済額 = 借入額 × [月利 × (1 + 月利)^返済回数] / [(1 + 月利)^返済回数 - 1]
```

## 📱 UI/UX設計

### Apple HIG準拠
- **カラーシステム**: システムカラー使用
- **タイポグラフィ**: San Francisco フォント
- **レイアウト**: セーフエリア対応
- **アクセシビリティ**: 最小タップ領域44pt

### モバイルファースト
- **レスポンシブデザイン**: 320px〜対応
- **タッチ操作**: スワイプ、タップ最適化
- **パフォーマンス**: 軽量設計

## ⚠️ 注意事項

- 本アプリケーションは教育・参考目的で作成されています
- 実際の投資判断や重要な財務決定には、専門家にご相談ください
- シミュレーション結果は入力データの精度に依存します
- 定期的なデータ更新をお勧めします

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能改善の提案は、GitHubのIssueまでお願いします。

---

**開発者**: FP1級相当の精度を目指したライフプランシミュレーションツール
**バージョン**: 1.0.0
**最終更新**: 2024年12月 